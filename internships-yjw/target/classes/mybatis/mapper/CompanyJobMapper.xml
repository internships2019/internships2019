<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ylq.internships.mapper.CompanyJobMapper">
    <resultMap id="companyJob" type="CompanyJob">
        <id property="jobId" column="job_id" javaType="Integer"/>
        <result property="conName" column="com_name" javaType="String"/>
        <result property="jobName" column="job_name" javaType="String"/>
        <result property="workPlace" column="work_place" javaType="String"/>
        <result property="workDescription" column="work_description" javaType="String"/>
        <result property="postTime" column="post_time" javaType="java.util.Date"/>
        <result property="endTime" column="end_time" javaType="java.util.Date"/>
        <result property="adState" column="ad_state" javaType="String"/>
        <result property="recruitNum" column="recruit_num" javaType="Integer"/>
        <result property="nowNum" column="now_num" javaType="Integer"/>
    </resultMap>

    <!--lwq-->
    <select id="getAll" resultMap="companyJob">
      select * from `company_job`
      where `ad_state` = '可申请' and `s_sc_name` = #{sc_name}
      order by `post_time` asc
    </select>

    <select id="getAllDesc" resultMap="companyJob">
        select * from `company_job`
        where `ad_state` = '可申请' and `s_sc_name` = #{sc_name}
        order by `post_time` desc
    </select>

    <select id="searchByComName" resultMap="companyJob">
        select * from  `company_job`
        where `ad_state` = '可申请' and `com_name` like #{com_name} and `s_sc_name` = #{sc_name}
        order by `post_time` asc
    </select>

    <select id="searchById" resultMap="companyJob">
        select * from `company_job`
        where `job_id` = #{job_id}
    </select>
    <update id="addNowNum">
        update `company_job`
        set `now_num` = `now_num` + 1
        where `job_id` = #{job_id}
    </update>
    <select id="checkNowNum" resultType="String">
        select `now_num` from `company_job` where `job_id` = #{job_id}
    </select>
    <!--lwq-->
</mapper>